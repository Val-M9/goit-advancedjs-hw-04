{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '33393016-2f1d389d0905d7f9551defc49';\n\nexport const fetchImages = async ({ inputValue, page, perPage }) => {\n  const params = {\n    key: API_KEY,\n    q: inputValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: perPage,\n    page,\n  };\n\n  const response = await axios.get(BASE_URL, { params });\n  return response.data;\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  searchForm: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadMore: document.querySelector('.load-more-btn'),\n};\n\nconst lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst showError = (message) => {\n  return iziToast.error({\n    title: 'Error',\n    message:\n      message ||\n      'Sorry, there are no images matching your search query. Please try again!',\n    position: 'topRight',\n    transitionIn: 'fadeInDown',\n  });\n};\n\nconst showNotification = (message) => {\n  return iziToast.info({\n    title: 'Info',\n    message: message,\n    position: 'topRight',\n    transitionIn: 'fadeInDown',\n  });\n};\n\nconst createImageElement = ({\n  webformatURL,\n  largeImageURL,\n  likes,\n  views,\n  comments,\n  downloads,\n  tags,\n}) => {\n  return `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=${largeImageURL}>\n        <img\n          class=\"gallery-image\"\n          src=${webformatURL}\n          alt=${tags}\n      \n        />\n        <div class=\"image-info\">\n          <div class=\"info-section\">\n            <p class=\"info-title\">Likes</p>\n            <p class=\"info-text\">${likes}</p>\n          </div>\n          <div class=\"info-section\">\n            <p class=\"info-title\">Views</p>\n            <p class=\"info-text\">${views}</p>\n          </div>\n          <div class=\"info-section\">\n            <p class=\"info-title\">Comments</p>\n            <p class=\"info-text\">${comments}</p>\n          </div>\n          <div class=\"info-section\">\n            <p class=\"info-title\">Downloads</p>\n            <p class=\"info-text\">${downloads}</p>\n          </div>\n        </div>\n      </a>\n    </li>\n    `;\n};\n\nconst renderGallery = (images) => {\n  if (!images.length) {\n    refs.gallery.innerHTML = '';\n    showError();\n  }\n\n  const markup = images.map((image) => createImageElement(image)).join('');\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n};\n\nexport { showError, showNotification, createImageElement, renderGallery, refs };\n","import { fetchImages } from './js/pixabay-api';\nimport {\n  showError,\n  showNotification,\n  renderGallery,\n  refs,\n} from './js/render-functions';\n\nconst imagesOptions = {\n  inputValue: '',\n  page: 1,\n  imagesLeft: 0,\n  perPage: 15,\n};\n\nconst handleInput = async (event) => {\n  event.preventDefault();\n\n  refs.gallery.innerHTML = '';\n  imagesOptions.page = 1;\n  imagesOptions.imagesLeft = 0;\n  refs.loadMore.classList.add('hidden');\n\n  const form = event.currentTarget;\n  imagesOptions.inputValue = form.elements.search.value.trim();\n\n  if (!imagesOptions.inputValue) {\n    refs.gallery.innerHTML = '';\n    return showError();\n  }\n\n  refs.loader.classList.add('active');\n\n  try {\n    const images = await fetchImages(imagesOptions);\n    imagesOptions.imagesLeft =\n      images.totalHits - imagesOptions.page * imagesOptions.perPage;\n\n    renderGallery(images.hits);\n    if (imagesOptions.imagesLeft > 0) {\n      refs.loadMore.classList.remove('hidden');\n    }\n  } catch (error) {\n    showError(error.message);\n  } finally {\n    form.reset();\n    refs.loader.classList.remove('active');\n  }\n};\n\nconst handleLoadMore = async () => {\n  refs.loadMore.classList.add('hidden');\n  refs.loader.classList.add('active');\n  imagesOptions.page += 1;\n\n  try {\n    const images = await fetchImages(imagesOptions);\n    imagesOptions.imagesLeft =\n      images.totalHits - imagesOptions.page * imagesOptions.perPage;\n    renderGallery(images.hits);\n\n    if (imagesOptions.imagesLeft <= 0) {\n      showNotification(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n      return;\n    }\n\n    const cardHeight =\n      refs.gallery.firstElementChild.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 3,\n      behavior: 'smooth',\n    });\n\n    refs.loadMore.classList.remove('hidden');\n  } catch (error) {\n    showError(error.message);\n  } finally {\n    refs.loader.classList.remove('active');\n  }\n};\n\nrefs.searchForm.addEventListener('submit', handleInput);\nrefs.loadMore.addEventListener('click', handleLoadMore);\n"],"names":["BASE_URL","API_KEY","fetchImages","inputValue","page","perPage","params","axios","refs","lightbox","SimpleLightbox","showError","message","iziToast","showNotification","createImageElement","webformatURL","largeImageURL","likes","views","comments","downloads","tags","renderGallery","images","markup","image","imagesOptions","handleInput","event","form","error","handleLoadMore","cardHeight"],"mappings":"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"}